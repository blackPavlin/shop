BEGIN;
CREATE TABLE carts
(
    id          BIGINT          NOT NULL    GENERATED BY DEFAULT AS IDENTITY,
    user_id     BIGINT          NOT NULL,
    product_id  BIGINT          NOT NULL,
    amount      BIGINT          NOT NULL    DEFAULT 0,

    created_at  TIMESTAMP       NOT NULL    DEFAULT (now() at time zone 'utc'),
    updated_at  TIMESTAMP       NOT NULL    DEFAULT (now() at time zone 'utc'),

    PRIMARY KEY (id),
    CONSTRAINT cart_user_fk FOREIGN KEY (user_id) REFERENCES users (id) ON DELETE RESTRICT,
    CONSTRAINT cart_product_fk FOREIGN KEY (product_id) REFERENCES products (id)  ON DELETE RESTRICT
);
COMMIT;
